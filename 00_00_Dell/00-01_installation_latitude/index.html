<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>00_00_Dell-latitude - wiki.nan0r.ovh</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "00_00_Dell-latitude";
    var mkdocs_page_input_path = "00_00_Dell/00-01_installation_latitude.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> wiki.nan0r.ovh</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">00_portable_sous_linux</span>
    <ul class="subnav">
                <li class=" current">
                    
    <a class="current" href="./">00_00_Dell-latitude</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#poste-de-travail">Poste de travail</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#aur">AUR</a></li>
        
            <li><a class="toctree-l4" href="#yay">Yay</a></li>
        
            <li><a class="toctree-l4" href="#thunderbolt">Thunderbolt</a></li>
        
            <li><a class="toctree-l4" href="#fwupd">FWUPD</a></li>
        
            <li><a class="toctree-l4" href="#kernel-manjaro-only-not-arch">Kernel (Manjaro only, not Arch)</a></li>
        
            <li><a class="toctree-l4" href="#fan">FAN</a></li>
        
            <li><a class="toctree-l4" href="#vpn">VPN</a></li>
        
            <li><a class="toctree-l4" href="#ssh">SSH</a></li>
        
            <li><a class="toctree-l4" href="#git">Git</a></li>
        
            <li><a class="toctree-l4" href="#gitlab">Gitlab</a></li>
        
            <li><a class="toctree-l4" href="#keepass">KeePass</a></li>
        
            <li><a class="toctree-l4" href="#oh-my-zsh">Oh My ZSH</a></li>
        
        </ul>
    

    </ul>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">01_auto_herbegement</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../01_auto_hebergement/01-01_materiel/">01-01_Materiel</a>
                </li>
                <li class="">
                    
    <a class="" href="../../01_auto_hebergement/01-02_hyperviseur/">01-02_Hyperviseur</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">About</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../about/license/">License</a>
                </li>
                <li class="">
                    
    <a class="" href="../../about/editor_md/">Markdown Editor test page</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">wiki.nan0r.ovh</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>00_portable_sous_linux &raquo;</li>
        
      
    
    <li>00_00_Dell-latitude</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="poste-de-travail">Poste de travail</h1>
<p>Pour bien commencer dans la vie, je vous conseil de vous procurer un PC portable, la marque Dell est une très bonne marque, je travail avec celle-ci depuis bientôt 7 ans et j'en suis très content, c'est également la marque que j'ai choisi pour un usage personnel. </p>
<p>Mon poste est Dell Latitude, l'OS choisi est Manjaro 20.0.3 : </p>
<p>https://manjaro.org/download/#gnome</p>
<p>Pour créer une clé USB bootable, vous aurez plusieurs choix possible, selon l'OS sur lequel vous tournez :</p>
<ul>
<li>Windows </li>
<li>Je vous conseil Rufus </li>
<li>https://rufus.ie/</li>
<li>MacOS et Linux </li>
<li>https://www.balena.io/etcher/</li>
</ul>
<p>Voici les recommandations concernant l'installation : </p>
<ul>
<li>Installation en UEFI !</li>
<li>Chiffrer le disque </li>
</ul>
<p>Il faut ensuite procéder à l'installation étape par étape (des screenshot arriveront pour décrire l'installation)</p>
<h2 id="aur">AUR</h2>
<p>Pour pouvoir obtenir des packages qui ne se touvent pas dans le dépôts officiels, vous pouvez utiliser sur ArchLinux et ces dérivés, les AUR (Arch User Repository), faites tout de même attention à ce que vous installez, normalement, les script d'insallation/compilation sont vérifiés par la communautée. </p>
<p>Par contre, si vous installez un binaire mais que par la suite, celui-ci n'est plus maintenu, vous aurez alors la probabilitée qu'une faille de sécurité soit présente et celle-ci ne sera pas comblé si le package n'est plus maintenu. </p>
<h2 id="yay">Yay</h2>
<p>Pour profiter des packages 'AUR', je vous conseil d'installer yay, il en existe beaucoup d'autre, j'utilisais yaourt par le passé </p>
<h2 id="thunderbolt">Thunderbolt</h2>
<p>1) Installation</p>
<p>Pour que les dock nouvelle génération, il faut utiliser l'outils boltctl pour authoriser le dock :</p>
<pre><code>yay -S bolt
</code></pre>

<p>Une fois installer, vous pouvez procéder de cette manière pour lister les périphérique :</p>
<pre><code>boltctl list
</code></pre>

<p>On repère l'uuid du périphérique que l'on souhaite  ajouter, je commence toujours par autoriser le câble, question de  logique, après si vous essayez d'ajouter le dock en premier, libre à  vous </p>
<p>Et enfin, on autorise un périphérique en ajout l'uuid souhaité au bout de cette ligne de commande : </p>
<pre><code>boltctl authorize &lt;uuid&gt;
</code></pre>

<p>On check si cela à bien été pris en compte, on vérifie que les point en face sont bien vert :</p>
<pre><code>boltctl list
</code></pre>

<p>C'est tout bon !</p>
<h2 id="fwupd">FWUPD</h2>
<p>Mise-à-jour du dock DELL TB16</p>
<p>Pour l'installer c'est simple, un petit :</p>
<pre><code class="bash">yay -S fwupd
</code></pre>

<p>Une fois installé, vous pouvez effectuer ces commandes, une à une, en répondant 'Oui' à chaque demande :</p>
<pre><code>fwupdmgr get-devices

Latitude 5591 Thunderbolt Controller
 ``DeviceId:            79c4c8626de71f9e01fc7ea5943848c9a7672667
 ``Guid:                7b370005-4c45-59c6-8a5f-23d0d1f674c0
 ``Summary:             Unmatched performance ``for` `high-speed I``/O
 ``Plugin:              thunderbolt
 ``Flags:               internal|updatable|require-ac|registered
 ``Vendor:              Dell
 ``VendorId:            TBT:0x00D4
 ``Version:             33.00
 ``VersionFormat:       pair
 ``Icon:                computer
 ``Created:             2019-10-03

Latitude 5591 System Firmware
 ``DeviceId:            6eaf130f9d1252a4cc3157471aa80fac80318068
 ``Guid:                479d7d09-78d8-4fb2-af14-ca6ecc80692d
 ``Plugin:              uefi
 ``Flags:               internal|updatable|require-ac|supported|registered|needs-reboot
 ``Version:             0.1.10.1
 ``VersionLowest:       0.1.10.1
 ``VersionFormat:       quad
 ``Icon:                computer
 ``Created:             2019-10-03

Latitude 5591 TPM 2.0
 ``DeviceId:            69e027de0fc0707d383b35e15b7be0612e4438e9
 ``Guid:                661454aa-1e34-5522-90df-bec35313017a
 ``Summary:             Platform TPM device
 ``Plugin:              uefi
 ``Flags:               internal|updatable|require-ac|registered|needs-reboot
 ``Vendor:              Dell Inc.
 ``Version:             7.2.0.1
 ``VersionFormat:       quad
 ``Icon:                computer
 ``Created:             2019-10-03

TOSHIBA KSG60ZMV512G M.2 2280 512GB
 ``DeviceId:            e421b2fc248391f6fe3e55ddbb3c9043be068bd0
 ``Guid:                268780e5-0fb4-5ba4-a6ef-a1c3aa72cb73
 ``Guid:                24716a8b-9cd0-5760-8c01-5d12275b2764
 ``Guid:                13bdace2-73cd-5ad7-b57c-7aafc56f4769
 ``Summary:             ATA Drive
 ``Plugin:              ata
 ``Flags:               internal|updatable|require-ac|registered|needs-reboot
 ``Version:             ABDA4105
 ``VersionFormat:       plain
 ``Icon:                drive-harddisk
 ``Created:             2019-10-03
</code></pre>

<p><strong>fwupdmgr refresh</strong></p>
<pre><code>fwupdmgr refresh

Fetching metadata https://cdn.fwupd.org/downloads/firmware.xml.gz
Downloading…             [***************************************]
Fetching signature https://cdn.fwupd.org/downloads/firmware.xml.gz.asc
</code></pre>

<p><strong>fwupdmgr get-update</strong></p>
<pre><code>fwupdmgr get-update

No upgrades for Latitude 5591 System Firmware, current is 0.1.10.1: 0.1.10.1=same, 0.1.8.1=older, 0.1.7.4=older, 0.1.6.1=older, 0.1.5.1=older
</code></pre>

<p><strong>fwupdmgr update</strong></p>
<pre><code>fwupdmgr update

No upgrades for Latitude 5591 System Firmware, current is 0.1.10.1: 0.1.10.1=same, 0.1.8.1=older, 0.1.7.4=older, 0.1.6.1=older, 0.1.5.1=older
</code></pre>

<p>L'ordinateur va surement vous demandez de  redémarrer, si vous avez 10 minutes devant vous, dites oui, sinon  reportez cela à un moment ouù vous avez un peu plus de temps </p>
<p>Une, fois redémarré, c'est bon, vous avez maintenant les derniers pilotes à jour !</p>
<h2 id="kernel-manjaro-only-not-arch">Kernel (Manjaro only, not Arch)</h2>
<p>Vous avez la possibilités d'upgrader le kernel de manière indépendante sous Arch/Manjaro comme sur Gentoo ou FreeBSD \o/</p>
<p>Pour cela, lister d'abord les kernel installé :</p>
<p><strong>mhwd-kernel -li</strong></p>
<pre><code>mhwd-kernel -li

Currently running: 5.6.16-1-MANJARO (linux56)
The following kernels are installed in your system:
   * linux56
   * linux57
</code></pre>

<p>Puis lister les Kernels disponible pour votre version de Manjaro :</p>
<p><strong>mhwd-kernel -l</strong></p>
<pre><code>mhwd-kernel -l

available kernels:
   * linux414
   * linux419
   * linux44
   * linux49
   * linux54
   * linux56
   * linux57
   * linux54-rt
   * linux56-rt
</code></pre>

<p>Vous pouvez donc voir que le Kernel 5.3 est  disponible, pour l'installer, procédé en sélectionnant le kernel que  vous désirez installer, cependant, ne pas valider à la hâte <img alt="(wink)" src="http://confluence.intra.etiam.com:8090/s/en_GB/7701/445126ab56584205167f1c035c86df495c7c4192/_/images/icons/emoticons/wink.svg" /></p>
<pre><code>[sudo] password for user: 
:: Synchronizing package databases...
 core                                                                                                               170.1 KiB   522 KiB/s 00:00 [----------------------------------------------------------------------------------------] 100%
 extra                                                                                                                2.0 MiB  5.12 MiB/s 00:00 [----------------------------------------------------------------------------------------] 100%
 community                                                                                                            5.9 MiB  9.17 MiB/s 00:01 [----------------------------------------------------------------------------------------] 100%
 multilib                                                                                                           195.2 KiB  11.2 MiB/s 00:00 [----------------------------------------------------------------------------------------] 100%
warning: linux57-5.7.0-3 is up to date -- reinstalling
warning: linux57-headers-5.7.0-3 is up to date -- reinstalling
warning: linux57-virtualbox-host-modules-6.1.8-3 is up to date -- reinstalling
resolving dependencies...
looking for conflicting packages...

Package (3)                            Old Version  New Version  Net Change

core/linux57                           5.7.0-3      5.7.0-3        0.00 MiB
core/linux57-headers                   5.7.0-3      5.7.0-3        0.00 MiB
extra/linux57-virtualbox-host-modules  6.1.8-3      6.1.8-3        0.00 MiB

Total Installed Size:  193.43 MiB
Net Upgrade Size:        0.00 MiB

:: Proceed with installation? [Y/n] 

</code></pre>

<p>Si vous regarder attentivement, vous verrez  que le Kenel 'linux53' comporte la mention 'rc', soit 'release  candidate' et n'est donc pas stable, je vous déconseille <strong>fortement</strong> d'installer cette version, contentez vous des versions <strong>stable</strong></p>
<h2 id="fan">FAN</h2>
<p>Pour que les ventillateurs arrête de vous faire penser que votre odrinateur ressemble plus à un serveur Proxmox plutôt qu'à un Dell latitude :  </p>
<h3 id="mode-performance">Mode performance</h3>
<pre><code>yay -S throttled env-modules-tcl dell-bios-fan-control-git i8kutils
sudo dell-bios-fan-control 0
sudo modprobe i8k force=1
sudo smbios-thermal-ctl --set-thermal-mode=Performance
i8kctl fan 1 1
</code></pre>

<p>Une fois ces actions réalisée, on va alors éditer le fichier et ajouter la ligne suivante :</p>
<p><strong>/etc/modules-load.d/i8k.conf</strong></p>
<pre><code>i8k
</code></pre>

<p>Puis, on édite le fichier suivant :</p>
<p><strong>/etc/i8kutils/i8kmon.conf</strong></p>
<pre><code># Sample i8kmon configuration file (/etc/i8kutils/i8kmon.conf, ~/.i8kmon).

# External program to control the fans
set config(i8kfan) /usr/bin/i8kfan

# Report status on stdout, override with --verbose option
set config(verbose) 0

# Status check timeout (seconds), override with --timeout option
set config(timeout) 2

# Temperature threshold at which the temperature is displayed in red
set config(t_high) 88

# Temperature thresholds: {fan_speeds low_ac high_ac low_batt high_batt}
# These were tested on the I8000. If you have a different Dell laptop model
# you should check the BIOS temperature monitoring and set the appropriate
# thresholds here. In doubt start with low values and gradually rise them
# until the fans are not always on when the cpu is idle.
set config(0) {{0 0} -1 65 -1 70}
set config(1) {{1 1} 50 75 55 80}
set config(2) {{1 1} 65 85 75 90}
set config(3) {{2 2} 80 128 85 128}

# Speed values are set here to avoid i8kmon probe them at every time it starts.
set status(leftspeed) &quot;0 3000 3500 4000&quot;
set status(rightspeed) &quot;0 3000 3500 4000&quot;

# end of file
</code></pre>

<p>Puis, on active les services :</p>
<pre><code>sudo systemctl enable dell-bios-fan-control
sudo systemctl start dell-bios-fan-control
sudo systemctl enable i8kmon
sudo systemctl start i8kmon
</code></pre>

<p>Puis, on reboot et après ça, on vérifie que le service 'i8kmon' tourne bien :</p>
<pre><code>reboot
systemctl status i8kmon
</code></pre>

<h3 id="mode-quiet">Mode quiet</h3>
<p>/!\ ATTENTION /!\Ce mode entraine une limitation de performance pouvant  diminuer la valeur 'CPU max MHz' qui est par défaut à 4.3 Ghz à 1.6 Ghz  (bridé environ à 10W, mais la vaeur est à confirmer)</p>
<p>On ajoute un package de control de la vitesse des ventilateurs :</p>
<pre><code>yay -S throttled
sudo smbios-thermal-ctl --set-thermal-mode=Quiet
</code></pre>

<h3 id="mode-manual-control">Mode manual control</h3>
<pre><code>yay -S env-modules-tcl dell-bios-fan-control-git i8kutils
sudo dell-bios-fan-control 0
sudo modprobe i8k force=1
i8kctl fan 1 1
</code></pre>

<h2 id="vpn">VPN</h2>
<h3 id="openvpn">OpenVPN</h3>
<h4 id="1-installation">1) Installation</h4>
<pre><code>yay -S networkmanager-openvpn
</code></pre>

<h4 id="2-telechargement-des-fichiers-de-configuration">2) Téléchargement des fichiers de configuration</h4>
<h2 id="ssh">SSH</h2>
<p>On installe le package : </p>
<pre><code>yay -S openssh --noconfirm
</code></pre>

<p>On génère ensuite la clé : </p>
<pre><code>ssh-keygen -o -a 100 -t ed25519 -f ~/.ssh/id_ed25519 -C &quot;user@doain.tld&quot;

Generating public/private ed25519 key pair.
Enter passphrase (empty for no passphrase): 
Enter same passphrase again: 
Your identification has been saved in /home/rlaunay/.ssh/id_ed25519
Your public key has been saved in /home/rlaunay/.ssh/id_ed25519.pub
The key fingerprint is:
SHA256:wJis4ExkizK5ynYuKfiEp6QFoN9i4JEnQGz+8HBEizs user@nan0r.ovh
The key's randomart image is:
+--[ED25519 256]--+
|.+..             |
|=+oo.+           |
|@+..+ o          |
|OBoo   .         |
|=EB.    S        |
|+==+             |
|+=O..            |
|*Oo.             |
|+.o.             |
+----[SHA256]-----+

</code></pre>

<h2 id="git">Git</h2>
<p>On installe le package : </p>
<pre><code>yay -S git
</code></pre>

<h2 id="gitlab">Gitlab</h2>
<p>On se connecte depuis cette URL : </p>
<p>https://gitlab.com/users/sign_in</p>
<p>On installe le package xclip : </p>
<pre><code>yay -S xclip
</code></pre>

<p>On vient ensuite ajouter la clé SSH à notre profil : </p>
<pre><code>xclip -selection clipboard &lt; ~/.ssh/id_ed25519.pub
</code></pre>

<p>On vient ajouter la clé SSH sur Gitlab :</p>
<p>Rendez-vous <a href="https://gitlab.com/profile/keys">ici</a> et ajouter votre clé SSH en cliquant d'abord sur "Ajouter clé" en faisant un Ctrl + v</p>
<h2 id="keepass">KeePass</h2>
<h3 id="prerequis">Prerequis</h3>
<p>Un des navigateurs web suivant : </p>
<p>Installation </p>
<pre><code>yay -S keepassxc
</code></pre>

<p>Rendez-vous ensuite sur la page du module pour firefox : </p>
<p>https://addons.mozilla.org/fr/firefox/addon/keepassxc-browser/</p>
<p>Il ne reste plus qu'à lancer KeePassXC, reporter le mot de passe et suivre  les instructions pour créer une base de données de mot de passe  personnel. </p>
<h2 id="oh-my-zsh">Oh My ZSH</h2>
<p>Manjaro</p>
<pre><code>yay -S manjaro-zsh-config oh-my-zsh-git zsh zsh-autosuggestions zsh-completions zsh-doc zsh-history-substring-search zsh-navigation-tools zsh-syntax-highlighting zsh-theme-powerlevel10k zshdb
</code></pre>

<h3 id="teamviewer">TeamViewer</h3>
<p>Sur Manjaro, il faut installer le package puis démarrer le service :</p>
<pre><code>trizen -S teamviewer --noconfirm
sudo teamviewer --daemon enable
</code></pre>

<p>Vous pouvez alors lancer teamviewer, vous loguez et aider des personnes de votre famille si vous avez l'âme généreuse </p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../01_auto_hebergement/01-01_materiel/" class="btn btn-neutral float-right" title="01-01_Materiel">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../.." class="btn btn-neutral" title="Home"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../.." style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../../01_auto_hebergement/01-01_materiel/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>

</body>
</html>
